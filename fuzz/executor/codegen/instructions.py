from collections import namedtuple

# (opcode, operands, input_types, output_types)
Inst = namedtuple("Inst", ('opcode', 'operands', 'input_types', 'output_types'))
INSTRUCTIONS = {
    # control
    'unreachable':Inst(b"\x00", (), ('anystack',), ('anystack',)),
    'nop':Inst(b"\x01", (), (), ()),
    'block':Inst(b"\x02", ('blocktype',), ('anystack',), ('anystack',)),
    'loop':Inst(b"\x03", ('blocktype',), ('anystack',), ('anystack',)),
    'if':Inst(b"\x04", ('blocktype',), ('anystack', 'i32',), ('anystack',)),
    'else':Inst(b"\x05", (), (), ()),

    'end':Inst(b"\x0b", (), (), ()),
    'br':Inst(b"\x0c", ('labelidx',), ('anystack', 'anystack',), ('anystack',)),
    'br_if':Inst(b"\x0d", ('labelidx',), ('anystack', 'i32',), ('anystack',)),
    'br_table':Inst(b"\x0e", ('vec(labelidx)', 'labelidx',), ('anystack', 'anystack', 'i32',), ('anystack',)),
    'return':Inst(b"\x0f", (), ('anystack', 'anystack',), ('anystack',)),
    
    'call':Inst(b"\x10", ('funcidx',), ('anystack',), ('anystack',)),
    'call_indirect':Inst(b"\x11", ('typeidx', 'tableidx',), ('anystack', 'i32',), ('anystack',)),
    
    # parametric
    'drop':Inst(b"\x1a", (), ('any',), ()),
    'select':Inst(b"\x1b", (), ('any', 'any', 'i32',), ('any',)),
    'select_t':Inst(b"\x1c", ('vec(valtype)',), ('any', 'any', 'i32',), ('any',)),
    
    # variable
    'local.get':Inst(b"\x20", ('localidx',), (), ('any',)),
    'local.set':Inst(b"\x21", ('localidx',), ('any',), ()),
    'local.tee':Inst(b"\x22", ('localidx',), ('any',), ('any',)),
    'global.get':Inst(b"\x23", ('globalidx',), (), ('any',)),
    'global.set':Inst(b"\x24", ('globalidx',), ('any',), ()),

    # table
    'table.get':Inst(b"\x25", ('tableidx',), ('i32',), ('any',)),
    'table.set':Inst(b"\x26", ('tableidx',), ('i32', 'any',), ()),


    'i32.load':Inst(b"\x28", ('memarg',), ('i32',), ('i32',)),
    'i64.load':Inst(b"\x29", ('memarg',), ('i32',), ('i64',)),
    'f32.load':Inst(b"\x2a", ('memarg',), ('i32',), ('f32',)),
    'f64.load':Inst(b"\x2b", ('memarg',), ('i32',), ('f64',)),
    'i32.load8_s':Inst(b"\x2c", ('memarg',), ('i32',), ('i32',)),
    'i32.load8_u':Inst(b"\x2d", ('memarg',), ('i32',), ('i32',)),
    'i32.load16_s':Inst(b"\x2e", ('memarg',), ('i32',), ('i32',)),
    'i32.load16_u':Inst(b"\x2f", ('memarg',), ('i32',), ('i32',)),
    'i64.load8_s':Inst(b"\x30", ('memarg',), ('i32',), ('i64',)),
    'i64.load8_u':Inst(b"\x31", ('memarg',), ('i32',), ('i64',)),
    'i64.load16_s':Inst(b"\x32", ('memarg',), ('i32',), ('i64',)),
    'i64.load16_u':Inst(b"\x33", ('memarg',), ('i32',), ('i64',)),
    'i64.load32_s':Inst(b"\x34", ('memarg',), ('i32',), ('i64',)),
    'i64.load32_u':Inst(b"\x35", ('memarg',), ('i32',), ('i64',)),
    
    'i32.store':Inst(b"\x36", ('memarg',), ('i32', 'i32',), ()),
    'i64.store':Inst(b"\x37", ('memarg',), ('i32', 'i64',), ()),
    'f32.store':Inst(b"\x38", ('memarg',), ('i32', 'f32',), ()),
    'f64.store':Inst(b"\x39", ('memarg',), ('i32', 'f64',), ()),
    'i32.store8':Inst(b"\x3a", ('memarg',), ('i32', 'i32',), ()),
    'i32.store16':Inst(b"\x3b", ('memarg',), ('i32', 'i32',), ()),
    'i64.store8':Inst(b"\x3c", ('memarg',), ('i32', 'i64',), ()),
    'i64.store16':Inst(b"\x3d", ('memarg',), ('i32', 'i64',), ()),
    'i64.store32':Inst(b"\x3e", ('memarg',), ('i32', 'i64',), ()),

    'memory.size':Inst(b"\x3f", (b"\x00",), (), ('i32',)),
    'memory.grow':Inst(b"\x40", (b"\x00",), ('i32',), ('i32',)),
    
    'i32.const':Inst(b"\x41", ('i32',), (), ('i32',)),
    'i64.const':Inst(b"\x42", ('i64',), (), ('i64',)),
    'f32.const':Inst(b"\x43", ('f32',), (), ('f32',)),
    'f64.const':Inst(b"\x44", ('f64',), (), ('f64',)),
    
    'i32.eqz':Inst(b"\x45", (), ('i32',), ('i32',)),
    'i32.eq':Inst(b"\x46", (), ('i32', 'i32',), ('i32',)),
    'i32.ne':Inst(b"\x47", (), ('i32', 'i32',), ('i32',)),
    'i32.lt_s':Inst(b"\x48", (), ('i32', 'i32',), ('i32',)),
    'i32.lt_u':Inst(b"\x49", (), ('i32', 'i32',), ('i32',)),
    'i32.gt_s':Inst(b"\x4a", (), ('i32', 'i32',), ('i32',)),
    'i32.gt_u':Inst(b"\x4b", (), ('i32', 'i32',), ('i32',)),
    'i32.le_s':Inst(b"\x4c", (), ('i32', 'i32',), ('i32',)),
    'i32.le_u':Inst(b"\x4d", (), ('i32', 'i32',), ('i32',)),
    'i32.ge_s':Inst(b"\x4e", (), ('i32', 'i32',), ('i32',)),
    'i32.ge_u':Inst(b"\x4f", (), ('i32', 'i32',), ('i32',)),
    'i64.eqz':Inst(b"\x50", (), ('i64',), ('i32',)),
    'i64.eq':Inst(b"\x51", (), ('i64', 'i64',), ('i32',)),
    'i64.ne':Inst(b"\x52", (), ('i64', 'i64',), ('i32',)),
    'i64.lt_s':Inst(b"\x53", (), ('i64', 'i64',), ('i32',)),
    'i64.lt_u':Inst(b"\x54", (), ('i64', 'i64',), ('i32',)),
    'i64.gt_s':Inst(b"\x55", (), ('i64', 'i64',), ('i32',)),
    'i64.gt_u':Inst(b"\x56", (), ('i64', 'i64',), ('i32',)),
    'i64.le_s':Inst(b"\x57", (), ('i64', 'i64',), ('i32',)),
    'i64.le_u':Inst(b"\x58", (), ('i64', 'i64',), ('i32',)),
    'i64.ge_s':Inst(b"\x59", (), ('i64', 'i64',), ('i32',)),
    'i64.ge_u':Inst(b"\x5a", (), ('i64', 'i64',), ('i32',)),
    'f32.eq':Inst(b"\x5b", (), ('f32', 'f32',), ('i32',)),
    'f32.ne':Inst(b"\x5c", (), ('f32', 'f32',), ('i32',)),
    'f32.lt':Inst(b"\x5d", (), ('f32', 'f32',), ('i32',)),
    'f32.gt':Inst(b"\x5e", (), ('f32', 'f32',), ('i32',)),
    'f32.le':Inst(b"\x5f", (), ('f32', 'f32',), ('i32',)),
    'f32.ge':Inst(b"\x60", (), ('f32', 'f32',), ('i32',)),
    'f64.eq':Inst(b"\x61", (), ('f64', 'f64',), ('i32',)),
    'f64.ne':Inst(b"\x62", (), ('f64', 'f64',), ('i32',)),
    'f64.lt':Inst(b"\x63", (), ('f64', 'f64',), ('i32',)),
    'f64.gt':Inst(b"\x64", (), ('f64', 'f64',), ('i32',)),
    'f64.le':Inst(b"\x65", (), ('f64', 'f64',), ('i32',)),
    'f64.ge':Inst(b"\x66", (), ('f64', 'f64',), ('i32',)),
    
    'i32.clz':Inst(b"\x67", (), ('i32',), ('i32',)),
    'i32.ctz':Inst(b"\x68", (), ('i32',), ('i32',)),
    'i32.popcnt':Inst(b"\x69", (), ('i32',), ('i32',)),
    'i32.add':Inst(b"\x6a", (), ('i32', 'i32',), ('i32',)),
    'i32.sub':Inst(b"\x6b", (), ('i32', 'i32',), ('i32',)),
    'i32.mul':Inst(b"\x6c", (), ('i32', 'i32',), ('i32',)),
    'i32.div_s':Inst(b"\x6d", (), ('i32', 'i32',), ('i32',)),
    'i32.div_u':Inst(b"\x6e", (), ('i32', 'i32',), ('i32',)),
    'i32.rem_s':Inst(b"\x6f", (), ('i32', 'i32',), ('i32',)),
    'i32.rem_u':Inst(b"\x70", (), ('i32', 'i32',), ('i32',)),
    'i32.and':Inst(b"\x71", (), ('i32', 'i32',), ('i32',)),
    'i32.or':Inst(b"\x72", (), ('i32', 'i32',), ('i32',)),
    'i32.xor':Inst(b"\x73", (), ('i32', 'i32',), ('i32',)),
    'i32.shl':Inst(b"\x74", (), ('i32', 'i32',), ('i32',)),
    'i32.shr_s':Inst(b"\x75", (), ('i32', 'i32',), ('i32',)),
    'i32.shr_u':Inst(b"\x76", (), ('i32', 'i32',), ('i32',)),
    'i32.rotl':Inst(b"\x77", (), ('i32', 'i32',), ('i32',)),
    'i32.rotr':Inst(b"\x78", (), ('i32', 'i32',), ('i32',)),
    'i64.clz':Inst(b"\x79", (), ('i64',), ('i64',)),
    'i64.ctz':Inst(b"\x7a", (), ('i64',), ('i64',)),
    'i64.popcnt':Inst(b"\x7b", (), ('i64',), ('i64',)),
    'i64.add':Inst(b"\x7c", (), ('i64', 'i64',), ('i64',)),
    'i64.sub':Inst(b"\x7d", (), ('i64', 'i64',), ('i64',)),
    'i64.mul':Inst(b"\x7e", (), ('i64', 'i64',), ('i64',)),
    'i64.div_s':Inst(b"\x7f", (), ('i64', 'i64',), ('i64',)),
    'i64.div_u':Inst(b"\x80", (), ('i64', 'i64',), ('i64',)),
    'i64.rem_s':Inst(b"\x81", (), ('i64', 'i64',), ('i64',)),
    'i64.rem_u':Inst(b"\x82", (), ('i64', 'i64',), ('i64',)),
    'i64.and':Inst(b"\x83", (), ('i64', 'i64',), ('i64',)),
    'i64.or':Inst(b"\x84", (), ('i64', 'i64',), ('i64',)),
    'i64.xor':Inst(b"\x85", (), ('i64', 'i64',), ('i64',)),
    'i64.shl':Inst(b"\x86", (), ('i64', 'i64',), ('i64',)),
    'i64.shr_s':Inst(b"\x87", (), ('i64', 'i64',), ('i64',)),
    'i64.shr_u':Inst(b"\x88", (), ('i64', 'i64',), ('i64',)),
    'i64.rotl':Inst(b"\x89", (), ('i64', 'i64',), ('i64',)),
    'i64.rotr':Inst(b"\x8a", (), ('i64', 'i64',), ('i64',)),
    'f32.abs':Inst(b"\x8b", (), ('f32',), ('f32',)),
    'f32.neg':Inst(b"\x8c", (), ('f32',), ('f32',)),
    'f32.ceil':Inst(b"\x8d", (), ('f32',), ('f32',)),
    'f32.floor':Inst(b"\x8e", (), ('f32',), ('f32',)),
    'f32.trunc':Inst(b"\x8f", (), ('f32',), ('f32',)),
    'f32.nearest':Inst(b"\x90", (), ('f32',), ('f32',)),
    'f32.sqrt':Inst(b"\x91", (), ('f32',), ('f32',)),
    'f32.add':Inst(b"\x92", (), ('f32', 'f32',), ('f32',)),
    'f32.sub':Inst(b"\x93", (), ('f32', 'f32',), ('f32',)),
    'f32.mul':Inst(b"\x94", (), ('f32', 'f32',), ('f32',)),
    'f32.div':Inst(b"\x95", (), ('f32', 'f32',), ('f32',)),
    'f32.min':Inst(b"\x96", (), ('f32', 'f32',), ('f32',)),
    'f32.max':Inst(b"\x97", (), ('f32', 'f32',), ('f32',)),
    'f32.copysign':Inst(b"\x98", (), ('f32', 'f32',), ('f32',)),
    'f64.abs':Inst(b"\x99", (), ('f64',), ('f64',)),
    'f64.neg':Inst(b"\x9a", (), ('f64',), ('f64',)),
    'f64.ceil':Inst(b"\x9b", (), ('f64',), ('f64',)),
    'f64.floor':Inst(b"\x9c", (), ('f64',), ('f64',)),
    'f64.trunc':Inst(b"\x9d", (), ('f64',), ('f64',)),
    'f64.nearest':Inst(b"\x9e", (), ('f64',), ('f64',)),
    'f64.sqrt':Inst(b"\x9f", (), ('f64',), ('f64',)),
    'f64.add':Inst(b"\xa0", (), ('f64', 'f64',), ('f64',)),
    'f64.sub':Inst(b"\xa1", (), ('f64', 'f64',), ('f64',)),
    'f64.mul':Inst(b"\xa2", (), ('f64', 'f64',), ('f64',)),
    'f64.div':Inst(b"\xa3", (), ('f64', 'f64',), ('f64',)),
    'f64.min':Inst(b"\xa4", (), ('f64', 'f64',), ('f64',)),
    'f64.max':Inst(b"\xa5", (), ('f64', 'f64',), ('f64',)),
    'f64.copysign':Inst(b"\xa6", (), ('f64', 'f64',), ('f64',)),
    
    'i32.wrap_i64':Inst(b"\xa7", (), ('i64',), ('i32',)),
    'i32.trunc_f32_s':Inst(b"\xa8", (), ('f32',), ('i32',)),
    'i32.trunc_f32_u':Inst(b"\xa9", (), ('f32',), ('i32',)),
    'i32.trunc_f64_s':Inst(b"\xaa", (), ('f64',), ('i32',)),
    'i32.trunc_f64_u':Inst(b"\xab", (), ('f64',), ('i32',)),
    'i64.extend_i32_s':Inst(b"\xac", (), ('i32',), ('i64',)),
    'i64.extend_i32_u':Inst(b"\xad", (), ('i32',), ('i64',)),
    'i64.trunc_f32_s':Inst(b"\xae", (), ('f32',), ('i64',)),
    'i64.trunc_f32_u':Inst(b"\xaf", (), ('f32',), ('i64',)),
    'i64.trunc_f64_s':Inst(b"\xb0", (), ('f64',), ('i64',)),
    'i64.trunc_f64_u':Inst(b"\xb1", (), ('f64',), ('i64',)),
    'f32.convert_i32_s':Inst(b"\xb2", (), ('i32',), ('f32',)),
    'f32.convert_i32_u':Inst(b"\xb3", (), ('i32',), ('f32',)),
    'f32.convert_i64_s':Inst(b"\xb4", (), ('i64',), ('f32',)),
    'f32.convert_i64_u':Inst(b"\xb5", (), ('i64',), ('f32',)),
    'f32.demote_f64':Inst(b"\xb6", (), ('f64',), ('f32',)),
    'f64.convert_i32_s':Inst(b"\xb7", (), ('i32',), ('f64',)),
    'f64.convert_i32_u':Inst(b"\xb8", (), ('i32',), ('f64',)),
    'f64.convert_i64_s':Inst(b"\xb9", (), ('i64',), ('f64',)),
    'f64.convert_i64_u':Inst(b"\xba", (), ('i64',), ('f64',)),
    'f64.promote_f32':Inst(b"\xbb", (), ('f32',), ('f64',)),

    'i32.reinterpret_f32':Inst(b"\xbc", (), ('f32',), ('i32',)),
    'i64.reinterpret_f64':Inst(b"\xbd", (), ('f64',), ('i64',)),
    'f32.reinterpret_i32':Inst(b"\xbe", (), ('i32',), ('f32',)),
    'f64.reinterpret_i64':Inst(b"\xbf", (), ('i64',), ('f64',)),

    'i32.extend8_s':Inst(b"\xc0", (), ('i32',), ('i32',)),
    'i32.extend16_s':Inst(b"\xc1", (), ('i32',), ('i32',)),
    'i64.extend8_s':Inst(b"\xc2", (), ('i64',), ('i64',)),
    'i64.extend16_s':Inst(b"\xc3", (), ('i64',), ('i64',)),
    'i64.extend32_s':Inst(b"\xc4", (), ('i64',), ('i64',)),

    'ref.null':Inst(b"\xd0", ('reftype',), (), ('any',)),
    'ref.is_null':Inst(b"\xd1", (), ('any',), ('i32',)),
    'ref.func':Inst(b"\xd2", ('funcidx',), (), ('funcref',)),

    'i32.trunc_sat_f32_s':Inst(b"\xfc\x00", (), ('f32',), ('i32',)),
    'i32.trunc_sat_f32_u':Inst(b"\xfc\x01", (), ('f32',), ('i32',)),
    'i32.trunc_sat_f64_s':Inst(b"\xfc\x02", (), ('f64',), ('i32',)),
    'i32.trunc_sat_f64_u':Inst(b"\xfc\x03", (), ('f64',), ('i32',)),
    'i64.trunc_sat_f32_s':Inst(b"\xfc\x04", (), ('f32',), ('i64',)),
    'i64.trunc_sat_f32_u':Inst(b"\xfc\x05", (), ('f32',), ('i64',)),
    'i64.trunc_sat_f64_s':Inst(b"\xfc\x06", (), ('f64',), ('i64',)),
    'i64.trunc_sat_f64_u':Inst(b"\xfc\x07", (), ('f64',), ('i64',)),

    'memory.init':Inst(b"\xfc\x08", ('dataidx', b"\x00",), ('i32', 'i32', 'i32',), ()),
    'data.drop':Inst(b"\xfc\x09", ('dataidx',), (), ()),
    'memory.copy':Inst(b"\xfc\x0a", (b"\x00", b"\x00"), ('i32', 'i32', 'i32',), ()),
    'memory.fill':Inst(b"\xfc\x0b", (b"\x00",), ('i32', 'i32', 'i32',), ()),
    'table.init':Inst(b"\xfc\x0c", ('elemidx', 'tableidx',), ('i32', 'i32', 'i32',), ()),
    'elem.drop':Inst(b"\xfc\x0d", ('elemidx',), (), ()),
    'table.copy':Inst(b"\xfc\x0e", ('tableidx', 'tableidx',), ('i32', 'i32', 'i32',), ()),
    'table.grow':Inst(b"\xfc\x0f", ('tableidx', ), ('any', 'i32',), ('i32',)),
    'table.size':Inst(b"\xfc\x10", ('tableidx',), (), ('i32',)),
    'table.fill':Inst(b"\xfc\x11", ('tableidx',), ('i32', 'any', 'i32',), ()),

    'v128.load':Inst(b"\xfd\x00", ('memarg',), ('i32',), ('v128',)),
    'v128.load8x8_s':Inst(b"\xfd\x01", ('memarg',), ('i32',), ('v128',)),
    'v128.load8x8_u':Inst(b"\xfd\x02", ('memarg',), ('i32',), ('v128',)),
    'v128.load16x4_s':Inst(b"\xfd\x03", ('memarg',), ('i32',), ('v128',)),
    'v128.load16x4_u':Inst(b"\xfd\x04", ('memarg',), ('i32',), ('v128',)),
    'v128.load32x2_s':Inst(b"\xfd\x05", ('memarg',), ('i32',), ('v128',)),
    'v128.load32x2_u':Inst(b"\xfd\x06", ('memarg',), ('i32',), ('v128',)),
    'v128.load8_splat':Inst(b"\xfd\x07", ('memarg',), ('i32',), ('v128',)),
    'v128.load16_splat':Inst(b"\xfd\x08", ('memarg',), ('i32',), ('v128',)),
    'v128.load32_splat':Inst(b"\xfd\x09", ('memarg',), ('i32',), ('v128',)),
    'v128.load64_splat':Inst(b"\xfd\x0a", ('memarg',), ('i32',), ('v128',)),
    'v128.store':Inst(b"\xfd\x0b", ('memarg',), ('i32', 'v128',), ()),

    'v128.const':Inst(b"\xfd\x0c", ('byte16',), (), ('v128',)),

    'i8x16.shuffle':Inst(b"\xfd\x0d", ('laneidx16',), ('v128', 'v128',), ('v128',)),

    'i8x16.swizzle':Inst(b"\xfd\x0e", (), ('v128', 'v128',), ('v128',)),
    'i8x16.splat':Inst(b"\xfd\x0f", (), ('i32',), ('v128',)),
    'i16x8.splat':Inst(b"\xfd\x10", (), ('i32',), ('v128',)),
    'i32x4.splat':Inst(b"\xfd\x11", (), ('i32',), ('v128',)),
    'i64x2.splat':Inst(b"\xfd\x12", (), ('i64',), ('v128',)),
    'f32x4.splat':Inst(b"\xfd\x13", (), ('f32',), ('v128',)),
    'f64x2.splat':Inst(b"\xfd\x14", (), ('f64',), ('v128',)),

    'i8x16.extract_lane_s':Inst(b"\xfd\x15", ('laneidx',), ('v128',), ('i32',)),
    'i8x16.extract_lane_u':Inst(b"\xfd\x16", ('laneidx',), ('v128',), ('i32',)),
    'i8x16.replace_lane':Inst(b"\xfd\x17", ('laneidx',), ('v128', 'i32',), ('v128',)),
    'i16x8.extract_lane_s':Inst(b"\xfd\x18", ('laneidx',), ('v128',), ('i32',)),
    'i16x8.extract_lane_u':Inst(b"\xfd\x19", ('laneidx',), ('v128',), ('i32',)),
    'i16x8.replace_lane':Inst(b"\xfd\x1a", ('laneidx',), ('v128', 'i32',), ('v128',)),
    'i32x4.extract_lane':Inst(b"\xfd\x1b", ('laneidx',), ('v128',), ('i32',)),
    'i32x4.replace_lane':Inst(b"\xfd\x1c", ('laneidx',), ('v128', 'i32',), ('v128',)),
    'i64x2.extract_lane':Inst(b"\xfd\x1d", ('laneidx',), ('v128',), ('i64',)),
    'i64x2.replace_lane':Inst(b"\xfd\x1e", ('laneidx',), ('v128', 'i64',), ('v128',)),
    'f32x4.extract_lane':Inst(b"\xfd\x1f", ('laneidx',), ('v128',), ('f32',)),
    'f32x4.replace_lane':Inst(b"\xfd\x20", ('laneidx',), ('v128', 'f32',), ('v128',)),
    'f64x2.extract_lane':Inst(b"\xfd\x21", ('laneidx',), ('v128',), ('f64',)),
    'f64x2.replace_lane':Inst(b"\xfd\x22", ('laneidx',), ('v128', 'f64',), ('v128',)),

    'i8x16.eq':Inst(b"\xfd\x23", (), ('v128', 'v128',), ('v128',)),
    'i8x16.ne':Inst(b"\xfd\x24", (), ('v128', 'v128',), ('v128',)),
    'i8x16.lt_s':Inst(b"\xfd\x25", (), ('v128', 'v128',), ('v128',)),
    'i8x16.lt_u':Inst(b"\xfd\x26", (), ('v128', 'v128',), ('v128',)),
    'i8x16.gt_s':Inst(b"\xfd\x27", (), ('v128', 'v128',), ('v128',)),
    'i8x16.gt_u':Inst(b"\xfd\x28", (), ('v128', 'v128',), ('v128',)),
    'i8x16.le_s':Inst(b"\xfd\x29", (), ('v128', 'v128',), ('v128',)),
    'i8x16.le_u':Inst(b"\xfd\x2a", (), ('v128', 'v128',), ('v128',)),
    'i8x16.ge_s':Inst(b"\xfd\x2b", (), ('v128', 'v128',), ('v128',)),
    'i8x16.ge_u':Inst(b"\xfd\x2c", (), ('v128', 'v128',), ('v128',)),

    'i16x8.eq':Inst(b"\xfd\x2d", (), ('v128', 'v128',), ('v128',)),
    'i16x8.ne':Inst(b"\xfd\x2e", (), ('v128', 'v128',), ('v128',)),
    'i16x8.lt_s':Inst(b"\xfd\x2f", (), ('v128', 'v128',), ('v128',)),
    'i16x8.lt_u':Inst(b"\xfd\x30", (), ('v128', 'v128',), ('v128',)),
    'i16x8.gt_s':Inst(b"\xfd\x31", (), ('v128', 'v128',), ('v128',)),
    'i16x8.gt_u':Inst(b"\xfd\x32", (), ('v128', 'v128',), ('v128',)),
    'i16x8.le_s':Inst(b"\xfd\x33", (), ('v128', 'v128',), ('v128',)),
    'i16x8.le_u':Inst(b"\xfd\x34", (), ('v128', 'v128',), ('v128',)),
    'i16x8.ge_s':Inst(b"\xfd\x35", (), ('v128', 'v128',), ('v128',)),
    'i16x8.ge_u':Inst(b"\xfd\x36", (), ('v128', 'v128',), ('v128',)),

    'i32x4.eq':Inst(b"\xfd\x37", (), ('v128', 'v128',), ('v128',)),
    'i32x4.ne':Inst(b"\xfd\x38", (), ('v128', 'v128',), ('v128',)),
    'i32x4.lt_s':Inst(b"\xfd\x39", (), ('v128', 'v128',), ('v128',)),
    'i32x4.lt_u':Inst(b"\xfd\x3a", (), ('v128', 'v128',), ('v128',)),
    'i32x4.gt_s':Inst(b"\xfd\x3b", (), ('v128', 'v128',), ('v128',)),
    'i32x4.gt_u':Inst(b"\xfd\x3c", (), ('v128', 'v128',), ('v128',)),
    'i32x4.le_s':Inst(b"\xfd\x3d", (), ('v128', 'v128',), ('v128',)),
    'i32x4.le_u':Inst(b"\xfd\x3e", (), ('v128', 'v128',), ('v128',)),
    'i32x4.ge_s':Inst(b"\xfd\x3f", (), ('v128', 'v128',), ('v128',)),
    'i32x4.ge_u':Inst(b"\xfd\x40", (), ('v128', 'v128',), ('v128',)),

    'f32x4.eq':Inst(b"\xfd\x41", (), ('v128', 'v128',), ('v128',)),
    'f32x4.ne':Inst(b"\xfd\x42", (), ('v128', 'v128',), ('v128',)),
    'f32x4.lt':Inst(b"\xfd\x43", (), ('v128', 'v128',), ('v128',)),
    'f32x4.gt':Inst(b"\xfd\x44", (), ('v128', 'v128',), ('v128',)),
    'f32x4.le':Inst(b"\xfd\x45", (), ('v128', 'v128',), ('v128',)),
    'f32x4.ge':Inst(b"\xfd\x46", (), ('v128', 'v128',), ('v128',)),

    'f64x2.eq':Inst(b"\xfd\x47", (), ('v128', 'v128',), ('v128',)),
    'f64x2.ne':Inst(b"\xfd\x48", (), ('v128', 'v128',), ('v128',)),
    'f64x2.lt':Inst(b"\xfd\x49", (), ('v128', 'v128',), ('v128',)),
    'f64x2.gt':Inst(b"\xfd\x4a", (), ('v128', 'v128',), ('v128',)),
    'f64x2.le':Inst(b"\xfd\x4b", (), ('v128', 'v128',), ('v128',)),
    'f64x2.ge':Inst(b"\xfd\x4c", (), ('v128', 'v128',), ('v128',)),

    'v128.not':Inst(b"\xfd\x4d", (), ('v128',), ('v128',)),
    'v128.and':Inst(b"\xfd\x4e", (), ('v128', 'v128',), ('v128',)),
    'v128.andnot':Inst(b"\xfd\x4f", (), ('v128', 'v128',), ('v128',)),
    'v128.or':Inst(b"\xfd\x50", (), ('v128', 'v128',), ('v128',)),
    'v128.xor':Inst(b"\xfd\x51", (), ('v128', 'v128',), ('v128',)),
    'v128.bitselect':Inst(b"\xfd\x52", (), ('v128', 'v128', 'v128',), ('v128',)),
    'v128.any_true':Inst(b"\xfd\x53", (), ('v128',), ('i32',)),

    'v128.load8_lane':Inst(b"\xfd\x54", ('memarg', 'laneidx',), ('i32', 'v128',), ('v128',)),
    'v128.load16_lane':Inst(b"\xfd\x55", ('memarg', 'laneidx',), ('i32', 'v128',), ('v128',)),
    'v128.load32_lane':Inst(b"\xfd\x56", ('memarg', 'laneidx',), ('i32', 'v128',), ('v128',)),
    'v128.load64_lane':Inst(b"\xfd\x57", ('memarg', 'laneidx',), ('i32', 'v128',), ('v128',)),
    'v128.store8_lane':Inst(b"\xfd\x58", ('memarg', 'laneidx',), ('i32', 'v128',), ()),
    'v128.store16_lane':Inst(b"\xfd\x59", ('memarg', 'laneidx',), ('i32', 'v128',), ()),
    'v128.store32_lane':Inst(b"\xfd\x5a", ('memarg', 'laneidx',), ('i32', 'v128',), ()),
    'v128.store64_lane':Inst(b"\xfd\x5b", ('memarg', 'laneidx',), ('i32', 'v128',), ()),

    'v128.load32_zero':Inst(b"\xfd\x5c", ('memarg',), ('i32',), ('v128',)),
    'v128.load64_zero':Inst(b"\xfd\x5d", ('memarg',), ('i32',), ('v128',)),

    'f32x4.demote_f64x2_zero':Inst(b"\xfd\x5e", (), ('v128',), ('v128',)),
    'f64x2.promote_low_f32x4':Inst(b"\xfd\x5f", (), ('v128',), ('v128',)),

    'i8x16.abs':Inst(b"\xfd\x60", (), ('v128',), ('v128',)),
    'i8x16.neg':Inst(b"\xfd\x61", (), ('v128',), ('v128',)),
    'i8x16.popcnt':Inst(b"\xfd\x62", (), ('v128',), ('v128',)),
    'i8x16.all_true':Inst(b"\xfd\x63", (), ('v128',), ('i32',)),
    'i8x16.bitmask':Inst(b"\xfd\x64", (), ('v128',), ('i32',)),
    'i8x16.narrow_i16x8_s':Inst(b"\xfd\x65", (), ('v128', 'v128',), ('v128',)),
    'i8x16.narrow_i16x8_u':Inst(b"\xfd\x66", (), ('v128', 'v128',), ('v128',)),

    'f32x4.ceil':Inst(b"\xfd\x67", (), ('v128',), ('v128',)),
    'f32x4.floor':Inst(b"\xfd\x68", (), ('v128',), ('v128',)),
    'f32x4.trunc':Inst(b"\xfd\x69", (), ('v128',), ('v128',)),
    'f32x4.nearest':Inst(b"\xfd\x6a", (), ('v128',), ('v128',)),

    'i8x16.shl':Inst(b"\xfd\x6b", (), ('v128', 'i32',), ('v128',)),
    'i8x16.shr_s':Inst(b"\xfd\x6c", (), ('v128', 'i32',), ('v128',)),
    'i8x16.shr_u':Inst(b"\xfd\x6d", (), ('v128', 'i32',), ('v128',)),
    'i8x16.add':Inst(b"\xfd\x6e", (), ('v128', 'v128',), ('v128',)),
    'i8x16.add_sat_s':Inst(b"\xfd\x6f", (), ('v128', 'v128',), ('v128',)),
    'i8x16.add_sat_u':Inst(b"\xfd\x70", (), ('v128', 'v128',), ('v128',)),
    'i8x16.sub':Inst(b"\xfd\x71", (), ('v128', 'v128',), ('v128',)),
    'i8x16.sub_sat_s':Inst(b"\xfd\x72", (), ('v128', 'v128',), ('v128',)),
    'i8x16.sub_sat_u':Inst(b"\xfd\x73", (), ('v128', 'v128',), ('v128',)),

    'f64x2.ceil':Inst(b"\xfd\x74", (), ('v128',), ('v128',)),
    'f64x2.floor':Inst(b"\xfd\x75", (), ('v128',), ('v128',)),

    'i8x16.min_s':Inst(b"\xfd\x76", (), ('v128', 'v128',), ('v128',)),
    'i8x16.min_u':Inst(b"\xfd\x77", (), ('v128', 'v128',), ('v128',)),
    'i8x16.max_s':Inst(b"\xfd\x78", (), ('v128', 'v128',), ('v128',)),
    'i8x16.max_u':Inst(b"\xfd\x79", (), ('v128', 'v128',), ('v128',)),

    'f64x2.trunc':Inst(b"\xfd\x7a", (), ('v128',), ('v128',)),

    'i8x16.avgr_u':Inst(b"\xfd\x7b", (), ('v128', 'v128',), ('v128',)),

    'i16x8.extadd_pairwise_i8x16_s':Inst(b"\xfd\x7c", (), ('v128',), ('v128',)),
    'i16x8.extadd_pairwise_i8x16_u':Inst(b"\xfd\x7d", (), ('v128',), ('v128',)),
    'i32x4.extadd_pairwise_i16x8_s':Inst(b"\xfd\x7e", (), ('v128',), ('v128',)),
    'i32x4.extadd_pairwise_i16x8_u':Inst(b"\xfd\x7f", (), ('v128',), ('v128',)),
    'i16x8.abs':Inst(b"\xfd\x80\x01", (), ('v128',), ('v128',)),
    'i16x8.neg':Inst(b"\xfd\x81\x01", (), ('v128',), ('v128',)),
    'i16x8.q15mulr_sat_s':Inst(b"\xfd\x82\x01", (), ('v128', 'v128',), ('v128',)),
    'i16x8.all_true':Inst(b"\xfd\x83\x01", (), ('v128',), ('i32',)),
    'i16x8.bitmask':Inst(b"\xfd\x84\x01", (), ('v128',), ('i32',)),
    'i16x8.narrow_i32x4_s':Inst(b"\xfd\x85\x01", (), ('v128', 'v128',), ('v128',)),
    'i16x8.narrow_i32x4_u':Inst(b"\xfd\x86\x01", (), ('v128', 'v128',), ('v128',)),
    'i16x8.extend_low_i8x16_s':Inst(b"\xfd\x87\x01", (), ('v128',), ('v128',)),
    'i16x8.extend_high_i8x16_s':Inst(b"\xfd\x88\x01", (), ('v128',), ('v128',)),
    'i16x8.extend_low_i8x16_u':Inst(b"\xfd\x89\x01", (), ('v128',), ('v128',)),
    'i16x8.extend_high_i8x16_u':Inst(b"\xfd\x8a\x01", (), ('v128',), ('v128',)),
    'i16x8.shl':Inst(b"\xfd\x8b\x01", (), ('v128', 'i32',), ('v128',)),
    'i16x8.shr_s':Inst(b"\xfd\x8c\x01", (), ('v128', 'i32',), ('v128',)),
    'i16x8.shr_u':Inst(b"\xfd\x8d\x01", (), ('v128', 'i32',), ('v128',)),
    'i16x8.add':Inst(b"\xfd\x8e\x01", (), ('v128', 'v128',), ('v128',)),
    'i16x8.add_sat_s':Inst(b"\xfd\x8f\x01", (), ('v128', 'v128',), ('v128',)),
    'i16x8.add_sat_u':Inst(b"\xfd\x90\x01", (), ('v128', 'v128',), ('v128',)),
    'i16x8.sub':Inst(b"\xfd\x91\x01", (), ('v128', 'v128',), ('v128',)),
    'i16x8.sub_sat_s':Inst(b"\xfd\x92\x01", (), ('v128', 'v128',), ('v128',)),
    'i16x8.sub_sat_u':Inst(b"\xfd\x93\x01", (), ('v128', 'v128',), ('v128',)),
    'f64x2.nearest':Inst(b"\xfd\x94\x01", (), ('v128',), ('v128',)),
    'i16x8.mul':Inst(b"\xfd\x95\x01", (), ('v128', 'v128',), ('v128',)),
    'i16x8.min_s':Inst(b"\xfd\x96\x01", (), ('v128', 'v128',), ('v128',)),
    'i16x8.min_u':Inst(b"\xfd\x97\x01", (), ('v128', 'v128',), ('v128',)),
    'i16x8.max_s':Inst(b"\xfd\x98\x01", (), ('v128', 'v128',), ('v128',)),
    'i16x8.max_u':Inst(b"\xfd\x99\x01", (), ('v128', 'v128',), ('v128',)),
    'i16x8.avgr_u':Inst(b"\xfd\x9b\x01", (), ('v128', 'v128',), ('v128',)),
    'i16x8.extmul_low_i8x16_s':Inst(b"\xfd\x9c\x01", (), ('v128', 'v128',), ('v128',)),
    'i16x8.extmul_high_i8x16_s':Inst(b"\xfd\x9d\x01", (), ('v128', 'v128',), ('v128',)),
    'i16x8.extmul_low_i8x16_u':Inst(b"\xfd\x9e\x01", (), ('v128', 'v128',), ('v128',)),
    'i16x8.extmul_high_i8x16_u':Inst(b"\xfd\x9f\x01", (), ('v128', 'v128',), ('v128',)),
    'i32x4.abs':Inst(b"\xfd\xa0\x01", (), ('v128',), ('v128',)),
    'i32x4.neg':Inst(b"\xfd\xa1\x01", (), ('v128',), ('v128',)),
    'i32x4.all_true':Inst(b"\xfd\xa3\x01", (), ('v128',), ('i32',)),
    'i32x4.bitmask':Inst(b"\xfd\xa4\x01", (), ('v128',), ('i32',)),
    'i32x4.extend_low_i16x8_s':Inst(b"\xfd\xa7\x01", (), ('v128',), ('v128',)),
    'i32x4.extend_high_i16x8_s':Inst(b"\xfd\xa8\x01", (), ('v128',), ('v128',)),
    'i32x4.extend_low_i16x8_u':Inst(b"\xfd\xa9\x01", (), ('v128',), ('v128',)),
    'i32x4.extend_high_i16x8_u':Inst(b"\xfd\xaa\x01", (), ('v128',), ('v128',)),
    'i32x4.shl':Inst(b"\xfd\xab\x01", (), ('v128', 'i32',), ('v128',)),
    'i32x4.shr_s':Inst(b"\xfd\xac\x01", (), ('v128', 'i32',), ('v128',)),
    'i32x4.shr_u':Inst(b"\xfd\xad\x01", (), ('v128', 'i32',), ('v128',)),
    'i32x4.add':Inst(b"\xfd\xae\x01", (), ('v128', 'v128',), ('v128',)),
    'i32x4.sub':Inst(b"\xfd\xb1\x01", (), ('v128', 'v128',), ('v128',)),
    'i32x4.mul':Inst(b"\xfd\xb5\x01", (), ('v128', 'v128',), ('v128',)),
    'i32x4.min_s':Inst(b"\xfd\xb6\x01", (), ('v128', 'v128',), ('v128',)),
    'i32x4.min_u':Inst(b"\xfd\xb7\x01", (), ('v128', 'v128',), ('v128',)),
    'i32x4.max_s':Inst(b"\xfd\xb8\x01", (), ('v128', 'v128',), ('v128',)),
    'i32x4.max_u':Inst(b"\xfd\xb9\x01", (), ('v128', 'v128',), ('v128',)),
    'i32x4.dot_i16x8_s':Inst(b"\xfd\xba\x01", (), ('v128', 'v128',), ('v128',)),
    'i32x4.extmul_low_i16x8_s':Inst(b"\xfd\xbc\x01", (), ('v128', 'v128',), ('v128',)),
    'i32x4.extmul_high_i16x8_s':Inst(b"\xfd\xbd\x01", (), ('v128', 'v128',), ('v128',)),
    'i32x4.extmul_low_i16x8_u':Inst(b"\xfd\xbe\x01", (), ('v128', 'v128',), ('v128',)),
    'i32x4.extmul_high_i16x8_u':Inst(b"\xfd\xbf\x01", (), ('v128', 'v128',), ('v128',)),
    'i64x2.abs':Inst(b"\xfd\xc0\x01", (), ('v128',), ('v128',)),
    'i64x2.neg':Inst(b"\xfd\xc1\x01", (), ('v128',), ('v128',)),
    'i64x2.all_true':Inst(b"\xfd\xc3\x01", (), ('v128',), ('i32',)),
    'i64x2.bitmask':Inst(b"\xfd\xc4\x01", (), ('v128',), ('i32',)),
    'i64x2.extend_low_i32x4_s':Inst(b"\xfd\xc7\x01", (), ('v128',), ('v128',)),
    'i64x2.extend_high_i32x4_s':Inst(b"\xfd\xc8\x01", (), ('v128',), ('v128',)),
    'i64x2.extend_low_i32x4_u':Inst(b"\xfd\xc9\x01", (), ('v128',), ('v128',)),
    'i64x2.extend_high_i32x4_u':Inst(b"\xfd\xca\x01", (), ('v128',), ('v128',)),
    'i64x2.shl':Inst(b"\xfd\xcb\x01", (), ('v128', 'i32',), ('v128',)),
    'i64x2.shr_s':Inst(b"\xfd\xcc\x01", (), ('v128', 'i32',), ('v128',)),
    'i64x2.shr_u':Inst(b"\xfd\xcd\x01", (), ('v128', 'i32',), ('v128',)),
    'i64x2.add':Inst(b"\xfd\xce\x01", (), ('v128', 'v128',), ('v128',)),
    'i64x2.sub':Inst(b"\xfd\xd1\x01", (), ('v128', 'v128',), ('v128',)),
    'i64x2.mul':Inst(b"\xfd\xd5\x01", (), ('v128', 'v128',), ('v128',)),
    'i64x2.eq':Inst(b"\xfd\xd6\x01", (), ('v128', 'v128',), ('v128',)),
    'i64x2.ne':Inst(b"\xfd\xd7\x01", (), ('v128', 'v128',), ('v128',)),
    'i64x2.lt_s':Inst(b"\xfd\xd8\x01", (), ('v128', 'v128',), ('v128',)),
    'i64x2.gt_s':Inst(b"\xfd\xd9\x01", (), ('v128', 'v128',), ('v128',)),
    'i64x2.le_s':Inst(b"\xfd\xda\x01", (), ('v128', 'v128',), ('v128',)),
    'i64x2.ge_s':Inst(b"\xfd\xdb\x01", (), ('v128', 'v128',), ('v128',)),
    'i64x2.extmul_low_i32x4_s':Inst(b"\xfd\xdc\x01", (), ('v128', 'v128',), ('v128',)),
    'i64x2.extmul_high_i32x4_s':Inst(b"\xfd\xdd\x01", (), ('v128', 'v128',), ('v128',)),
    'i64x2.extmul_low_i32x4_u':Inst(b"\xfd\xde\x01", (), ('v128', 'v128',), ('v128',)),
    'i64x2.extmul_high_i32x4_u':Inst(b"\xfd\xdf\x01", (), ('v128', 'v128',), ('v128',)),
    'f32x4.abs':Inst(b"\xfd\xe0\x01", (), ('v128',), ('v128',)),
    'f32x4.neg':Inst(b"\xfd\xe1\x01", (), ('v128',), ('v128',)),
    'f32x4.sqrt':Inst(b"\xfd\xe3\x01", (), ('v128',), ('v128',)),
    'f32x4.add':Inst(b"\xfd\xe4\x01", (), ('v128', 'v128',), ('v128',)),
    'f32x4.sub':Inst(b"\xfd\xe5\x01", (), ('v128', 'v128',), ('v128',)),
    'f32x4.mul':Inst(b"\xfd\xe6\x01", (), ('v128', 'v128',), ('v128',)),
    'f32x4.div':Inst(b"\xfd\xe7\x01", (), ('v128', 'v128',), ('v128',)),
    'f32x4.min':Inst(b"\xfd\xe8\x01", (), ('v128', 'v128',), ('v128',)),
    'f32x4.max':Inst(b"\xfd\xe9\x01", (), ('v128', 'v128',), ('v128',)),
    'f32x4.pmin':Inst(b"\xfd\xea\x01", (), ('v128', 'v128',), ('v128',)),
    'f32x4.pmax':Inst(b"\xfd\xeb\x01", (), ('v128', 'v128',), ('v128',)),
    'f64x2.abs':Inst(b"\xfd\xec\x01", (), ('v128',), ('v128',)),
    'f64x2.neg':Inst(b"\xfd\xed\x01", (), ('v128',), ('v128',)),
    'f64x2.sqrt':Inst(b"\xfd\xef\x01", (), ('v128',), ('v128',)),
    'f64x2.add':Inst(b"\xfd\xf0\x01", (), ('v128', 'v128',), ('v128',)),
    'f64x2.sub':Inst(b"\xfd\xf1\x01", (), ('v128', 'v128',), ('v128',)),
    'f64x2.mul':Inst(b"\xfd\xf2\x01", (), ('v128', 'v128',), ('v128',)),
    'f64x2.div':Inst(b"\xfd\xf3\x01", (), ('v128', 'v128',), ('v128',)),
    'f64x2.min':Inst(b"\xfd\xf4\x01", (), ('v128', 'v128',), ('v128',)),
    'f64x2.max':Inst(b"\xfd\xf5\x01", (), ('v128', 'v128',), ('v128',)),
    'f64x2.pmin':Inst(b"\xfd\xf6\x01", (), ('v128', 'v128',), ('v128',)),
    'f64x2.pmax':Inst(b"\xfd\xf7\x01", (), ('v128', 'v128',), ('v128',)),
    'i32x4.trunc_sat_f32x4_s':Inst(b"\xfd\xf8\x01", (), ('v128',), ('v128',)),
    'i32x4.trunc_sat_f32x4_u':Inst(b"\xfd\xf9\x01", (), ('v128',), ('v128',)),
    'f32x4.convert_i32x4_s':Inst(b"\xfd\xfa\x01", (), ('v128',), ('v128',)),
    'f32x4.convert_i32x4_u':Inst(b"\xfd\xfb\x01", (), ('v128',), ('v128',)),
    'i32x4.trunc_sat_f64x2_s_zero':Inst(b"\xfd\xfc\x01", (), ('v128',), ('v128',)),
    'i32x4.trunc_sat_f64x2_u_zero':Inst(b"\xfd\xfd\x01", (), ('v128',), ('v128',)),
    'f64x2.convert_low_i32x4_s':Inst(b"\xfd\xfe\x01", (), ('v128',), ('v128',)),
    'f64x2.convert_low_i32x4_u':Inst(b"\xfd\xff\x01", (), ('v128',), ('v128',)),
    
    # atomic (not in official spec)
    'memory.atomic.notify':Inst(b"\xfe\x00", ('memarg',), ('i32', 'i32',), ('i32',)),
    'memory.atomic.wait32':Inst(b"\xfe\x01", ('memarg',), ('i32', 'i32', 'i64',), ('i32',)),
    'memory.atomic.wait64':Inst(b"\xfe\x02", ('memarg',), ('i32', 'i64', 'i64',), ('i32',)),
    'i32.atomic.load':Inst(b"\xfe\x10", ('memarg',), ('i32',), ('i32',)),
    'i64.atomic.load':Inst(b"\xfe\x11", ('memarg',), ('i32',), ('i64',)),
    'i32.atomic.load8_u':Inst(b"\xfe\x12", ('memarg',), ('i32',), ('i32',)),
    'i32.atomic.load16_u':Inst(b"\xfe\x13", ('memarg',), ('i32',), ('i32',)),
    'i64.atomic.load8_u':Inst(b"\xfe\x14", ('memarg',), ('i32',), ('i64',)),
    'i64.atomic.load16_u':Inst(b"\xfe\x15", ('memarg',), ('i32',), ('i64',)),
    'i64.atomic.load32_u':Inst(b"\xfe\x16", ('memarg',), ('i32',), ('i64',)),
    'i32.atomic.store':Inst(b"\xfe\x17", ('memarg',), ('i32', 'i32',), ()),
    'i64.atomic.store':Inst(b"\xfe\x18", ('memarg',), ('i32', 'i64',), ()),
    'i32.atomic.store8_u':Inst(b"\xfe\x19", ('memarg',), ('i32', 'i32',), ()),
    'i32.atomic.store16_u':Inst(b"\xfe\x1a", ('memarg',), ('i32', 'i32',), ()),
    'i64.atomic.store8_u':Inst(b"\xfe\x1b", ('memarg',), ('i32', 'i64',), ()),
    'i64.atomic.store16_u':Inst(b"\xfe\x1c", ('memarg',), ('i32', 'i64',), ()),
    'i64.atomic.store32_u':Inst(b"\xfe\x1d", ('memarg',), ('i32', 'i64',), ()),
    'i32.atomic.rmw.add':Inst(b"\xfe\x1e", ('memarg',), ('i32', 'i32',), ('i32',)),
    'i64.atomic.rmw.add':Inst(b"\xfe\x1f", ('memarg',), ('i32', 'i64',), ('i64',)),
    'i32.atomic.rmw8.add_u':Inst(b"\xfe\x20", ('memarg',), ('i32', 'i32',), ('i32',)),
    'i32.atomic.rmw16.add_u':Inst(b"\xfe\x21", ('memarg',), ('i32', 'i32',), ('i32',)),
    'i64.atomic.rmw8.add_u':Inst(b"\xfe\x22", ('memarg',), ('i32', 'i64',), ('i64',)),
    'i64.atomic.rmw16.add_u':Inst(b"\xfe\x23", ('memarg',), ('i32', 'i64',), ('i64',)),
    'i64.atomic.rmw32.add_u':Inst(b"\xfe\x24", ('memarg',), ('i32', 'i64',), ('i64',)),
    'i32.atomic.rmw.sub':Inst(b"\xfe\x25", ('memarg',), ('i32', 'i32',), ('i32',)),
    'i64.atomic.rmw.sub':Inst(b"\xfe\x26", ('memarg',), ('i32', 'i64',), ('i64',)),
    'i32.atomic.rmw8.sub_u':Inst(b"\xfe\x27", ('memarg',), ('i32', 'i32',), ('i32',)),
    'i32.atomic.rmw16.sub_u':Inst(b"\xfe\x28", ('memarg',), ('i32', 'i32',), ('i32',)),
    'i64.atomic.rmw8.sub_u':Inst(b"\xfe\x29", ('memarg',), ('i32', 'i64',), ('i64',)),
    'i64.atomic.rmw16.sub_u':Inst(b"\xfe\x2a", ('memarg',), ('i32', 'i64',), ('i64',)),
    'i64.atomic.rmw32.sub_u':Inst(b"\xfe\x2b", ('memarg',), ('i32', 'i64',), ('i64',)),
    'i32.atomic.rmw.and':Inst(b"\xfe\x2c", ('memarg',), ('i32', 'i32',), ('i32',)),
    'i64.atomic.rmw.and':Inst(b"\xfe\x2d", ('memarg',), ('i32', 'i64',), ('i64',)),
    'i32.atomic.rmw8.and_u':Inst(b"\xfe\x2e", ('memarg',), ('i32', 'i32',), ('i32',)),
    'i32.atomic.rmw16.and_u':Inst(b"\xfe\x2f", ('memarg',), ('i32', 'i32',), ('i32',)),
    'i64.atomic.rmw8.and_u':Inst(b"\xfe\x30", ('memarg',), ('i32', 'i64',), ('i64',)),
    'i64.atomic.rmw16.and_u':Inst(b"\xfe\x31", ('memarg',), ('i32', 'i64',), ('i64',)),
    'i64.atomic.rmw32.and_u':Inst(b"\xfe\x32", ('memarg',), ('i32', 'i64',), ('i64',)),
    'i32.atomic.rmw.or':Inst(b"\xfe\x33", ('memarg',), ('i32', 'i32',), ('i32',)),
    'i64.atomic.rmw.or':Inst(b"\xfe\x34", ('memarg',), ('i32', 'i64',), ('i64',)),
    'i32.atomic.rmw8.or_u':Inst(b"\xfe\x35", ('memarg',), ('i32', 'i32',), ('i32',)),
    'i32.atomic.rmw16.or_u':Inst(b"\xfe\x36", ('memarg',), ('i32', 'i32',), ('i32',)),
    'i64.atomic.rmw8.or_u':Inst(b"\xfe\x37", ('memarg',), ('i32', 'i64',), ('i64',)),
    'i64.atomic.rmw16.or_u':Inst(b"\xfe\x38", ('memarg',), ('i32', 'i64',), ('i64',)),
    'i64.atomic.rmw32.or_u':Inst(b"\xfe\x39", ('memarg',), ('i32', 'i64',), ('i64',)),
    'i32.atomic.rmw.xor':Inst(b"\xfe\x3a", ('memarg',), ('i32', 'i32',), ('i32',)),
    'i64.atomic.rmw.xor':Inst(b"\xfe\x3b", ('memarg',), ('i32', 'i64',), ('i64',)),
    'i32.atomic.rmw8.xor_u':Inst(b"\xfe\x3c", ('memarg',), ('i32', 'i32',), ('i32',)),
    'i32.atomic.rmw16.xor_u':Inst(b"\xfe\x3d", ('memarg',), ('i32', 'i32',), ('i32',)),
    'i64.atomic.rmw8.xor_u':Inst(b"\xfe\x3e", ('memarg',), ('i32', 'i64',), ('i64',)),
    'i64.atomic.rmw16.xor_u':Inst(b"\xfe\x3f", ('memarg',), ('i32', 'i64',), ('i64',)),
    'i64.atomic.rmw32.xor_u':Inst(b"\xfe\x40", ('memarg',), ('i32', 'i64',), ('i64',)),
    'i32.atomic.rmw.xchg':Inst(b"\xfe\x41", ('memarg',), ('i32', 'i32',), ('i32',)),
    'i64.atomic.rmw.xchg':Inst(b"\xfe\x42", ('memarg',), ('i32', 'i64',), ('i64',)),
    'i32.atomic.rmw8.xchg_u':Inst(b"\xfe\x43", ('memarg',), ('i32', 'i32',), ('i32',)),
    'i32.atomic.rmw16.xchg_u':Inst(b"\xfe\x44", ('memarg',), ('i32', 'i32',), ('i32',)),
    'i64.atomic.rmw8.xchg_u':Inst(b"\xfe\x45", ('memarg',), ('i32', 'i64',), ('i64',)),
    'i64.atomic.rmw16.xchg_u':Inst(b"\xfe\x46", ('memarg',), ('i32', 'i64',), ('i64',)),
    'i64.atomic.rmw32.xchg_u':Inst(b"\xfe\x47", ('memarg',), ('i32', 'i64',), ('i64',)),
    'i32.atomic.rmw.cmpxchg':Inst(b"\xfe\x48", ('memarg',), ('i32', 'i32', 'i32',), ('i32',)),
    'i64.atomic.rmw.cmpxchg':Inst(b"\xfe\x49", ('memarg',), ('i32', 'i64', 'i64',), ('i64',)),
    'i32.atomic.rmw8.cmpxchg_u':Inst(b"\xfe\x4a", ('memarg',), ('i32', 'i32', 'i32',), ('i32',)),
    'i32.atomic.rmw16.cmpxchg_u':Inst(b"\xfe\x4b", ('memarg',), ('i32', 'i32', 'i32',), ('i32',)),
    'i64.atomic.rmw8.cmpxchg_u':Inst(b"\xfe\x4c", ('memarg',), ('i32', 'i64', 'i64',), ('i64',)),
    'i64.atomic.rmw16.cmpxchg_u':Inst(b"\xfe\x4d", ('memarg',), ('i32', 'i64', 'i64',), ('i64',)),
    'i64.atomic.rmw32.cmpxchg_u':Inst(b"\xfe\x4e", ('memarg',), ('i32', 'i64', 'i64',), ('i64',)),

    # TODO: add gc instructions (not in official spec)
}

ALIGN_CANDIDATES = {
    'i32.load':(0, 1, 2),
    'i64.load':(0, 1, 2, 3),
    'f32.load':(0, 1, 2),
    'f64.load':(0, 1, 2, 3),
    'i32.load8_s':(0,),
    'i32.load8_u':(0,),
    'i32.load16_s':(0, 1),
    'i32.load16_u':(0, 1),
    'i64.load8_s':(0,),
    'i64.load8_u':(0,),
    'i64.load16_s':(0, 1),
    'i64.load16_u':(0, 1),
    'i64.load32_s':(0, 1, 2),
    'i64.load32_u':(0, 1, 2),
    
    'i32.store':(0, 1, 2),
    'i64.store':(0, 1, 2, 3),
    'f32.store':(0, 1, 2),
    'f64.store':(0, 1, 2, 3),
    'i32.store8':(0,),
    'i32.store16':(0, 1),
    'i64.store8':(0,),
    'i64.store16':(0, 1),
    'i64.store32':(0, 1, 2),

    'v128.load':(0, 1, 2, 3, 4),
    'v128.load8x8_s':(0, 1, 2, 3),
    'v128.load8x8_u':(0, 1, 2, 3),
    'v128.load16x4_s':(0, 1, 2, 3),
    'v128.load16x4_u':(0, 1, 2, 3),
    'v128.load32x2_s':(0, 1, 2, 3),
    'v128.load32x2_u':(0, 1, 2, 3),
    'v128.load8_splat':(0,),
    'v128.load16_splat':(0, 1),
    'v128.load32_splat':(0, 1, 2),
    'v128.load64_splat':(0, 1, 2, 3),
    'v128.store':(0, 1, 2, 3, 4),

    'v128.load8_lane':(0,),
    'v128.load16_lane':(0, 1),
    'v128.load32_lane':(0, 1, 2),
    'v128.load64_lane':(0, 1, 2, 3),
    'v128.store8_lane':(0,),
    'v128.store16_lane':(0, 1),
    'v128.store32_lane':(0, 1, 2),
    'v128.store64_lane':(0, 1, 2, 3),

    'v128.load32_zero':(0, 1, 2),
    'v128.load64_zero':(0, 1, 2, 3),
}